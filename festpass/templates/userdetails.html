<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit&family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.js"></script>
    <title>Shore24 Gitam | Fest pass</title>
    <style>
      body {
        background: linear-gradient(135deg, #007367, #009142, #006442);
      }
      .title {
        font-size: 40px;
        font-family: "MADE Outer Sans";
        font-weight: 700;
        color: rgb(0, 0, 0);
        text-align: center;
        text-shadow: 0px 4px 10px rgba(255, 255, 255, 0.3499999940395355);
      }
      .form-title {
        font-size: 20px;
        font-family: "MADE Outer Sans";
        font-weight: 700;
        color: rgb(0, 0, 0);
        margin-bottom: 1rem;
        text-shadow: 0px 4px 10px rgba(255, 255, 255, 0.3499999940395355);
      }
      body::-webkit-scrollbar {
        display: none;
      }
      body {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .preview-container {
        margin-top: 10px;
      }

      .preview-image {
        max-width: 100%;
        max-height: 200px;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    {%  include 'passbase.html' %}
    <div class="h-screen flex items-center justify-center">
      <div
        style="height: 40rem;background: white !important; margin: 1rem;"
        class="overflow-y-scroll container mx-auto max-w-2xl p-6 border border-gray-200 rounded-lg shadow-lg"
      >
        {% if messages %}
        {% for message in messages %}
        <div class="p-4 mb-4 text-sm rounded-lg {% if message.tags == 'info' %}text-blue-800 bg-blue-50{% elif message.tags == 'error' %}text-red-800 bg-red-50 dark:bg-gray-800 dark:text-red-400{% elif message.tags == 'success' %}text-green-800 bg-green-50{% endif %}"
            role="alert">
            <span class="font-medium">{{ message.tags.capitalize }}</span> : {{ message }}
        </div>
        {% endfor %}
        {% endif %}
        <h1 class="text-center title font-bold mb-5">Fest pass Registration</h1>
        <form method="POST" enctype="multipart/form-data">
          {% csrf_token %}
          <div class="grid gap-6 mb-6 md:grid-cols-2">
            <div>
              <label
                for="name"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Full Name</label
              >
              <input
                type="text"
                id="name"
                name="name"
                value="{{ studentdata.staff_name }}"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"
                placeholder="Enter Your Full name"
                required
              />
            </div>
            <div>
              <label
                for="email"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Email</label
              >
              <input
                type="email"
                id="email"
                name="email"
                value="{{ request.user.email }}"
                readonly="readonly"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"
                placeholder="Enter GITAM email"
                required
              />
            </div>
          </div>
          <div class="grid gap-6 mb-6 md:grid-cols-2">
            <div>
              <label
                for="contact_number"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Contact Number</label
              >
              <input
                type="tel"
                id="contact_number"
                name="contact_number"
                value="{{ studentdata.staff_mobile }}"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"
                placeholder="Enter phone number"
                required
              />
            </div>
            <div>
              <label
                for="regno"
                class="block mb-2 text-sm font-medium text-gray-900"
                >College Registration Number</label
              >
              <input
                type="text"
                id="regno"
                name="regno"
                value="{{ studentdata.staffid }}"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"
                placeholder="Enter Registration Number"
                required
              />
            </div>
          </div>
          <div class="grid gap-6 mb-6 md:grid-cols-2">
            <div>
                <label
                  for="gender"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Gender</label
                >
                {% if studentdata.staff_gender == 'M' %}
                  <select
                    id="gender"
                    name="gender"
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:text-black dark:focus:ring-blue-500 dark:focus:border-blue-500"
                    required
                  >
                    <option selected value="Male">Male</option>
                    <option value="Other">Others</option>
                  </select>
                {% elif studentdata.staff_gender == 'F' %}
                  <select
                    id="gender"
                    name="gender"
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:text-black dark:focus:ring-blue-500 dark:focus:border-blue-500"
                    required
                  >
                    <option selected value="Female">Female</option>
                    <option value="Other">Others</option>
                  </select>
                {% else %}
                  <select
                    id="gender"
                    name="gender"
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:text-black dark:focus:ring-blue-500 dark:focus:border-blue-500"
                    required
                  >
                    <option value="" disabled selected>Select Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Others</option>
                  </select>
                {% endif %}
              </div>
            <div>
              <label
                for="yearofstudy"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Select Year of Study</label
              >
              <select
                id="yearofstudy"
                name="yearofstudy"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:text-black dark:focus:ring-blue-500 dark:focus:border-blue-500"
                required
              >
                <option value="" disabled selected>select Year of Study</option>
                <option value="First year">1st Year</option>
                <option value="Second year">2nd Year</option>
                <option value="Third year">3rd Year</option>
                <option value="Forth year">4th Year</option>
                <option value="Fifth year">5th Year</option>
                <option value="Sixth year">6th Year</option>
                <option value="Seventh year">7th Year</option>
                <option value="Alumni">Alumni</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>
          <div class="grid gap-6 mb-6 md:grid-cols-2">
            <div>
              <label
                for="branch"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Branch</label
              >
              <input
                type="text"
                id="branch"
                name="branch"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"
                placeholder="Enter Branch Name(eg: CSE)"
                required
              />
            </div>
            <div>
              <label
                for="institute"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Institute/Department</label
              >
              <input
                type="text"
                id="institute"
                name="institute"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"
                placeholder="eg: Engeneering or MBA"
                value="{{ studentdata.college_code }}"
                required
              />
            </div>
          </div>
          <div class="grid gap-6 mb-6 md:grid-cols-2">
            <div>
              <label
                for="department"
                class="block mb-2 text-sm font-medium text-gray-900"
                >College Name</label
              >
              <input
                type="text"
                id="department"
                name="department"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:text-black dark:focus:ring-blue-500 dark:focus:border-blue-500"
                placeholder="Enter College Name"
                required
              />
            </div>
            <div>
              <label
                for="campus"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Select Campus</label
              >
              <select
                id="campus"
                name="campus"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:text-black dark:focus:ring-blue-500 dark:focus:border-blue-500"
                required
              >
              <option value="" disabled selected>Select campus</option>
              <option value="Visakhapatnam">Visakhapatnam</option>
              <option value="Hyderabad">Hyderabad</option>
              <option value="Bengaluru">Bengaluru</option>
              <option value="nongitamite">Non-GITAM student</option>
              </select>
            </div>
          </div>
          <div class="mb-6">
            <div>
              <label
                for="hosteler"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Are you Hosteler(if you are non-gitam, select no)</label
              >
              <select
                id="hosteler"
                name="hosteler"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:text-black dark:focus:ring-blue-500 dark:focus:border-blue-500"
                required
              >
                <option value="" disabled selected>Select</option>
                <option value="True">Yes</option>
                <option value="False">No</option>
              </select>
            </div>
          </div>
          <div class="mb-6">
            <div
              class="preview-container"
              id="previewContainer"
              style="display: none"
            >
              <h2>Preview</h2>
              <img
                src="#"
                alt="Preview"
                class="preview-image"
                id="previewImage"
                style="border: 2px solid rgb(255, 255, 255);border-radius: 50%; height:120px;width: 120px;"
              />
              <br />
            </div>
            <label
              class="block mb-2 text-sm font-medium text-gray-900"
              for="file_input"
              >Upload Profile Picture(Clear profile picture required for FestPass approval.If Other pictures found, your festpass will be rejected.)</label
            >
            <input
              class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none  dark:border-gray-600 dark:placeholder-gray-400"
              aria-describedby="file_input_help"
              id="profile_pic"
              name="profile_pic"
              type="file"
              accept="image/*"
              required
              onchange="previewImage(event)"
            />
            <p
              class="mt-1 text-sm text-gray-500 dark:text-gray-500"
              id="file_input_help"
            >
              PNG, JPG, or JPEG (MAX. 800x400px).
            </p>
          </div>
          <script>
            document.addEventListener("DOMContentLoaded", function () {
              var fileInput = document.getElementById("profile_pic");
              var previewContainer = document.getElementById("previewContainer");
              var previewImage = document.getElementById("previewImage");
          
              fileInput.addEventListener("change", function (event) {
                previewImageFile(event);
              });
          
              function previewImageFile(event) {
                var input = event.target;
                var fileSize = input.files[0].size; // Get the file size
          
                // Check if file size is less than 2MB (2 * 1024 * 1024 bytes)
                if (fileSize > 1* 1024 * 1024) {
                  alert("File size exceeds 1MB. Please upload a smaller file.");
                  input.value = null; // Clear the input field
                  previewContainer.style.display = "none"; // Hide the preview container
                  return; // Stop further execution
                }

                // Get the file name and check its extension
                var fileName = input.files[0].name;
                var fileExtension = fileName.split('.').pop().toLowerCase();
                var allowedExtensions = ['jpg', 'jpeg', 'png'];

                if (allowedExtensions.indexOf(fileExtension) === -1) {
                    alert("Invalid file format. Please upload a file with a valid extension (jpg, jpeg, png).");
                    input.value = null; // Clear the input field
                    previewContainer.style.display = "none"; // Hide the preview container
                    return; // Stop further execution
                }
          
                if (input.files && input.files[0]) {
                  var reader = new FileReader();
          
                  reader.onload = function (e) {
                    previewImage.src = e.target.result;
                    previewContainer.style.display = "block";
                  };
          
                  reader.readAsDataURL(input.files[0]);
                }
              }
            });
          </script>
          <button
            type="submit"
            class="text-white bg-gradient-to-r from-cyan-500 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2"
          >
            Next
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
